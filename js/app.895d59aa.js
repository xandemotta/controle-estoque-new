(function(){"use strict";var e={9851:function(e,t,o){var r=o(5471),a=o(8505),n=o(6521),s=o(9456),i=function(){var e=this,t=e._self._c;return t(a.A,[t(n.A,{staticClass:"theme-toggle-btn",attrs:{fab:"",absolute:"",color:e.buttonColor},on:{click:e.toggleDarkMode}},[t(s.A,{attrs:{color:e.iconColor}},[e._v(e._s(e.themeIcon))])],1),t("router-view")],1)},c=[],d={name:"App",computed:{themeIcon(){return this.$vuetify.theme.dark?"mdi-moon-waning-crescent":"mdi-white-balance-sunny"},iconColor(){return this.$vuetify.theme.dark?"blue":"yellow"},buttonColor(){return this.$vuetify.theme.dark?"blue darken-2":"yellow darken-2"}},methods:{toggleDarkMode(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark}}},l=d,u=o(1656),p=(0,u.A)(l,i,c,!1,null,"fd80623e",null),m=p.exports,h=o(3691),f=o.n(h),v=(o(4301),o(8992),o(7550),o(7153)),g=o(1526),A=o(5474),b=o(8412),y=function(){var e=this,t=e._self._c;return t(A.A,[t(b.A,[t(g.A,{attrs:{cols:"12",md:"6"}},[t("add-product",{on:{"product-added":e.fetchProducts}})],1),t(g.A,{attrs:{cols:"12",md:"6"}},[t("product-list",{attrs:{products:e.products},on:{"update-product":e.handleUpdateProduct,"delete-product":e.handleDeleteProduct}})],1)],1)],1)},k=[],_=(o(4520),o(1689)),P=o(8834),x=o(4089),C=o(8230),w=o(2987),q=o(1075),$=o(6315),O=o(2721),E=o(6067),F=o(9940),j=function(){var e=this,t=e._self._c;return t(A.A,[t(n.A,{staticClass:"mb-4",attrs:{color:"primary"},on:{click:e.toggleDarkMode}},[e._v(" Alternar Tema ")]),t(x.A,{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(_.A,[t(P.ri,[t("span",{staticClass:"headline"},[e._v("Editar Produto")])]),t(P.OQ,[t(C.A,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(F.A,{attrs:{label:"Nome do Produto",required:""},model:{value:e.editedProduct.nome,callback:function(t){e.$set(e.editedProduct,"nome",t)},expression:"editedProduct.nome"}}),t(F.A,{attrs:{label:"Descrição",required:""},model:{value:e.editedProduct.descricao,callback:function(t){e.$set(e.editedProduct,"descricao",t)},expression:"editedProduct.descricao"}}),t(F.A,{attrs:{label:"Quantidade",type:"number",required:""},model:{value:e.editedProduct.quantidade,callback:function(t){e.$set(e.editedProduct,"quantidade",t)},expression:"editedProduct.quantidade"}})],1)],1),t(P.SL,[t(n.A,{attrs:{color:"red"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancelar")]),t(n.A,{attrs:{disabled:!e.valid,color:"primary"},on:{click:e.updateProduct}},[e._v(" Atualizar ")])],1)],1)],1),t(w.A,[t(E.A,e._l(e.localProducts,(function(o){return t(q.A,{key:o.id},[t(O.pr,[t(O.UZ,[e._v(e._s(o.nome))]),t(O.w,[e._v(e._s(o.descricao))]),t(O.w,[e._v("Quantidade: "+e._s(o.quantidade))])],1),t($.A,[t(n.A,{attrs:{icon:""},on:{click:function(t){return e.editProduct(o)}}},[t(s.A,[e._v("mdi-pencil")])],1),t(n.A,{attrs:{icon:""},on:{click:function(t){return e.deleteProduct(o.id)}}},[t(s.A,{attrs:{color:"red"}},[e._v("mdi-delete")])],1)],1)],1)})),1)],1)],1)},L=[],T={name:"ProductList",props:{products:Array},data(){return{dialog:!1,editedProduct:{},valid:!1,localProducts:[...this.products]}},watch:{products(e){this.localProducts=[...e]}},methods:{editProduct(e){this.editedProduct={...e},this.dialog=!0},updateProduct(){this.$emit("update-product",this.editedProduct),this.dialog=!1},deleteProduct(e){this.$emit("delete-product",e)},toggleDarkMode(){const e=this.$vuetify.theme.dark;this.$vuetify.theme.dark=!e}}},S=T,D=(0,u.A)(S,j,L,!1,null,"2fd5847c",null),M=D.exports,I=function(){var e=this,t=e._self._c;return t(A.A,[t(C.A,{on:{submit:function(t){return t.preventDefault(),e.addProduct.apply(null,arguments)}}},[t(F.A,{attrs:{label:"Nome",required:""},model:{value:e.nome,callback:function(t){e.nome=t},expression:"nome"}}),t(F.A,{attrs:{label:"Descrição",required:""},model:{value:e.descricao,callback:function(t){e.descricao=t},expression:"descricao"}}),t(F.A,{attrs:{label:"Quantidade",type:"number",required:""},model:{value:e.quantidade,callback:function(t){e.quantidade=t},expression:"quantidade"}}),t(n.A,{attrs:{type:"submit",color:"primary"}},[e._v("Adicionar Produto")])],1),t(n.A,{attrs:{color:"red"},on:{click:e.logout}},[e._v("Logout")])],1)},z=[],U=(o(4114),o(4335));const N=U.A.create({baseURL:"http://localhost:3000/",headers:{"Content-Type":"application/json"}});N.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),N.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(console.log("Token expirado ou não autorizado. Redirecionando para login..."),(void 0).$router.push("/login")),Promise.reject(e))));var Q=N,R={data(){return{nome:"",descricao:"",quantidade:0}},methods:{async addProduct(){try{const e=await Q.post("/api/produtos",{nome:this.nome,descricao:this.descricao,quantidade:this.quantidade});this.$emit("product-added",e.data),this.resetForm()}catch(e){console.error("Error adding product:",e)}},resetForm(){this.nome="",this.descricao="",this.quantidade=0},logout(){localStorage.removeItem("token"),this.$router.push("/login")}}},B=R,Z=(0,u.A)(B,I,z,!1,null,null,null),H=Z.exports,J={name:"HomePage",components:{ProductList:M,AddProduct:H},data(){return{products:[]}},methods:{async fetchProducts(){try{const e=await Q.get("/api/produtos");this.products=e.data}catch(e){console.error("Erro ao buscar produtos:",e)}},async handleUpdateProduct(e){try{const t=await Q.put(`/api/produtos/${e.id}`,e),o=this.products.findIndex((t=>t.id===e.id));-1!==o&&this.products.splice(o,1,t.data.product||t.data)}catch(t){console.error("Erro ao atualizar o produto:",t)}},async handleDeleteProduct(e){try{await Q.delete(`/api/produtos/${e}`),this.products=this.products.filter((t=>t.id!==e))}catch(t){console.error("Erro ao excluir o produto:",t)}}},created(){this.fetchProducts()}},G=J,K=(0,u.A)(G,y,k,!1,null,null,null),V=K.exports,W=o(1770),X=function(){var e=this,t=e._self._c;return t(A.A,{staticClass:"login-page",attrs:{fluid:""}},[t(b.A,{attrs:{align:"center",justify:"center"}},[t(g.A,{attrs:{cols:"12",md:"4"}},[t(_.A,{staticClass:"pa-5",attrs:{elevation:"8"}},[t(P.ri,{staticClass:"text-h5"},[e._v("Login")]),t(P.ZR,[e._v("Entre com suas credenciais")]),t(C.A,{staticClass:"mt-4",on:{submit:function(t){return t.preventDefault(),e.submitLogin.apply(null,arguments)}}},[t(F.A,{attrs:{label:"Login",required:"","prepend-icon":"mdi-account",outlined:""},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}}),t(F.A,{attrs:{label:"Senha",type:"password",required:"","prepend-icon":"mdi-lock",outlined:""},model:{value:e.senha,callback:function(t){e.senha=t},expression:"senha"}}),t(n.A,{staticClass:"mt-4",attrs:{color:"primary",type:"submit",block:""}},[e._v("Entrar")])],1),t(W.A,{staticClass:"my-4"}),t("div",{staticClass:"text-center"},[t("p",[e._v("Ainda não tem uma conta?")]),t(n.A,{attrs:{color:"secondary",block:"",outlined:""},on:{click:e.goToCadastro}},[e._v(" Cadastrar ")])],1)],1)],1)],1)],1)},Y=[],ee={data(){return{login:"",senha:""}},methods:{async submitLogin(){try{console.log("Enviando dados para o backend:",this.login,this.senha);const e=await Q.post("/api/auth/login",{login:this.login,senha:this.senha},{headers:{"Content-Type":"application/json"}});e.data.token?(localStorage.setItem("token",e.data.token),this.$router.push("/")):alert("Erro no login: Token não retornado")}catch(e){console.error("Erro ao fazer login:",e.response?e.response.data:e),alert("Credenciais incorretas ou erro de conexão")}},goToCadastro(){this.$router.push("/cadastro")}}},te=ee,oe=(0,u.A)(te,X,Y,!1,null,"4d95b2e0",null),re=oe.exports,ae=o(999),ne=function(){var e=this,t=e._self._c;return t(A.A,{staticClass:"cadastro-page",attrs:{fluid:""}},[t(b.A,{attrs:{align:"center",justify:"center"}},[t(g.A,{attrs:{cols:"12",md:"4"}},[t(_.A,{staticClass:"pa-5",attrs:{elevation:"8"}},[t(P.ri,{staticClass:"text-h5"},[e._v("Criar Conta")]),t(P.ZR,[e._v("Preencha os dados para se cadastrar")]),t(C.A,{staticClass:"mt-4",on:{submit:function(t){return t.preventDefault(),e.criarConta.apply(null,arguments)}}},[t(F.A,{attrs:{label:"Login",required:"","prepend-icon":"mdi-account",outlined:""},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}}),t(F.A,{attrs:{label:"Senha",type:"password",required:"","prepend-icon":"mdi-lock",outlined:""},model:{value:e.senha,callback:function(t){e.senha=t},expression:"senha"}}),t(F.A,{attrs:{label:"Nome",required:"","prepend-icon":"mdi-account-box",outlined:""},model:{value:e.nome,callback:function(t){e.nome=t},expression:"nome"}}),t(ae.A,{attrs:{items:e.nivelAcessoOpcoes,label:"Nível de Acesso",required:"","prepend-icon":"mdi-shield-account",outlined:""},model:{value:e.nivelAcesso,callback:function(t){e.nivelAcesso=t},expression:"nivelAcesso"}}),t(n.A,{staticClass:"mt-4",attrs:{color:"primary",type:"submit",block:""}},[e._v("Criar Conta")])],1),t(W.A,{staticClass:"my-4"}),e.erroMensagem?t("div",{staticClass:"error-message text-center mt-2"},[t("p",[e._v(e._s(e.erroMensagem))])]):e._e(),t("div",{staticClass:"text-center mt-4"},[t("p",[e._v("Já tem uma conta?")]),t(n.A,{attrs:{color:"secondary",block:"",outlined:""},on:{click:e.goToLogin}},[e._v(" Entrar ")])],1)],1)],1)],1)],1)},se=[],ie={data(){return{login:"",senha:"",nome:"",nivelAcesso:"user",erroMensagem:"",nivelAcessoOpcoes:[{text:"Admin",value:"admin"},{text:"User",value:"user"}]}},methods:{async criarConta(){try{const e=await U.A.post("http://localhost:3000/api/users/create",{login:this.login,senha:this.senha,nome:this.nome,nivelAcesso:this.nivelAcesso});201===e.status&&(alert("Conta criada com sucesso!"),window.location.href="http://localhost:8080/#/login")}catch(e){console.error(e),this.erroMensagem=e.response?e.response.data.message:"Erro ao criar a conta"}},goToLogin(){this.$router.push("/login")}}},ce=ie,de=(0,u.A)(ce,ne,se,!1,null,"44f46d21",null),le=de.exports;r["default"].use(v.Ay);const ue=[{path:"/",name:"Home",component:V,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:re,meta:{requiresAuth:!1}},{path:"/cadastro",name:"Cadastro",component:le,meta:{requiresAuth:!1}}],pe=new v.Ay({routes:ue});pe.beforeEach(((e,t,o)=>{const r=localStorage.getItem("token");e.matched.some((e=>e.meta.requiresAuth))&&!r?o("/login"):"Login"===e.name&&r?o("/"):o()}));var me=pe;r["default"].config.productionTip=!1,r["default"].use(f());const he=new(f())({theme:{dark:!1,themes:{dark:{primary:"#2196F3",secondary:"#03A9F4",background:"#121212",accent:"#03A9F4"},light:{primary:"#FFEB3B",secondary:"#FF9800",background:"#FAFAFA",accent:"#FF5722"}}}});new r["default"]({render:e=>e(m),router:me,vuetify:he}).$mount("#app")}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,r,a,n){if(!r){var s=1/0;for(l=0;l<e.length;l++){r=e[l][0],a=e[l][1],n=e[l][2];for(var i=!0,c=0;c<r.length;c++)(!1&n||s>=n)&&Object.keys(o.O).every((function(e){return o.O[e](r[c])}))?r.splice(c--,1):(i=!1,n<s&&(s=n));if(i){e.splice(l--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[r,a,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,n,s=r[0],i=r[1],c=r[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(c)var l=c(o)}for(t&&t(r);d<s.length;d++)n=s[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(l)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(9851)}));r=o.O(r)})();
//# sourceMappingURL=app.895d59aa.js.map